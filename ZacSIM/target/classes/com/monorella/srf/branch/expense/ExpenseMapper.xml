<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.monorella.srf.branch.expense.ExpenseMapper">

<select id="searchExpense" parameterType="java.util.Map" resultType="com.monorella.srf.branch.dto.Expense">
	SELECT 
	expense_cd
		 , branch_owner_cd
		 , expense_breakdown 
		 , expense_total
		 , branch_name
		 , expense_date
	FROM branch_expense_tb
	WHERE #{searchStartDate}<![CDATA[ <=]]> expense_date AND expense_date <![CDATA[ <=]]> #{searchEndDate}
	</select>



<select id="selectExpenseList" parameterType="java.util.Map" resultType="com.monorella.srf.branch.dto.Expense">
	SELECT 	
	 branch_owner_cd
		, expense_breakdown
		, expense_total
		, branch_name
		, expense_date
		FROM branch_expense_tb 
		WHERE branch_owner_cd = #{branch_owner_cd}
		ORDER BY expense_date DESC 
		LIMIT #{beginRow}, #{pagePerRow}
	</select>

	<select id="getExpenseCount" resultType="int">
		SELECT COUNT(*) FROM branch_expense_tb
	</select>
	
<insert id="insertExpense" parameterType="com.monorella.srf.branch.dto.Expense">
	INSERT INTO branch_expense_tb(
		branch_owner_cd
		, expense_price
		, expense_breakdown
		, expense_amount
		, branch_name
		, expense_total
		, expense_date
		, expense_month)	
	VALUES(
		#{branch_owner_cd}
		, #{expense_price}
		, #{expense_breakdown}
		, #{expense_amount}
		, #{branch_name}
		, #{expense_total}
		, #{expense_date}
		, DATE_FORMAT(expense_date,'%m')
	)
	</insert>
</mapper>